# å¤šæ•°æ®åº“å¤‡ä»½åŠŸèƒ½è¯¦è§£

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»MySQLå¤‡ä»½ç³»ç»Ÿçš„å¤šæ•°æ®åº“æ”¯æŒåŠŸèƒ½ã€‚

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

ç³»ç»Ÿç°åœ¨æ”¯æŒå¤‡ä»½å¤šä¸ªä¸åŒåœ°æ–¹çš„æ•°æ®åº“ï¼ŒåŒ…æ‹¬ï¼š
- ä¸åŒæœåŠ¡å™¨ä¸Šçš„æ•°æ®åº“
- ä¸åŒäº‘æœåŠ¡å•†çš„æ•°æ®åº“
- å¾®æœåŠ¡æ¶æ„ä¸­çš„å¤šä¸ªæ•°æ®åº“
- å¤šç¯å¢ƒéƒ¨ç½²ï¼ˆå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰
- å¤šç§Ÿæˆ·SaaSåº”ç”¨çš„ç‹¬ç«‹æ•°æ®åº“

## ğŸ”§ æ”¯æŒçš„é…ç½®æ ¼å¼

### 1. ç®€å•æ ¼å¼ï¼ˆå‘åå…¼å®¹ï¼‰

```bash
# å•ä¸ªæ•°æ®åº“
MYSQL_CONNECTIONS="mysql://user:pass@host:3306/database"

# åŒæœåŠ¡å™¨å¤šä¸ªæ•°æ®åº“
MYSQL_CONNECTIONS="mysql://user:pass@host:3306/db1,db2,db3"
```

### 2. å¤šæœåŠ¡å™¨æ ¼å¼ï¼ˆæ–°å¢ï¼‰

```bash
# å¤šä¸ªä¸åŒæœåŠ¡å™¨ï¼ˆåˆ†å·åˆ†éš”ï¼‰
MYSQL_CONNECTIONS="mysql://user1:pass1@host1:3306/db1;mysql://user2:pass2@host2:3306/db2"
```

### 3. JSONé…ç½®æ ¼å¼ï¼ˆæ¨èï¼‰

```json
[
  {
    "name": "Production",
    "connection": "mysql://prod_user:prod_pass@prod.db.com:3306/proddb",
    "schedule": "0 2 * * *",
    "retention_days": 30,
    "enabled": true
  },
  {
    "name": "Staging",
    "connection": "mysql://staging_user:staging_pass@staging.db.com:3306/stagingdb",
    "schedule": "0 4 * * *",
    "retention_days": 14,
    "enabled": true
  }
]
```

## ğŸ—ï¸ æ ¸å¿ƒåŠŸèƒ½

### è¿æ¥åˆ†ç»„ç®¡ç†

- è‡ªåŠ¨æŒ‰è¿æ¥ç»„ç»‡æ•°æ®åº“
- æ”¯æŒè‡ªå®šä¹‰ç»„å
- æŒ‰ç»„æ˜¾ç¤ºå¤‡ä»½çŠ¶æ€å’Œç»Ÿè®¡

### ç‹¬ç«‹é…ç½®æ”¯æŒ

æ¯ä¸ªè¿æ¥ç»„å¯ä»¥æœ‰ç‹¬ç«‹çš„ï¼š
- å¤‡ä»½è°ƒåº¦æ—¶é—´
- æ•°æ®ä¿ç•™ç­–ç•¥
- å¯ç”¨/ç¦ç”¨çŠ¶æ€
- è‡ªå®šä¹‰æ ‡ç­¾å’Œå…ƒæ•°æ®

### æ™ºèƒ½æ–‡ä»¶å‘½å

å¤‡ä»½æ–‡ä»¶è‡ªåŠ¨åŒ…å«ç»„åï¼š
```
backup_[ç»„å]_[æ•°æ®åº“å]_[æ—¶é—´æˆ³].sql.gz
```

ç¤ºä¾‹ï¼š
- `backup_Production_maindb_20231203_140000.sql.gz`
- `backup_Staging_testdb_20231203_140000.sql.gz`

## ğŸ“Š ç›‘æ§å’ŒçŠ¶æ€

### åˆ†ç»„çŠ¶æ€æ˜¾ç¤º

```json
{
  "connection_groups": {
    "Production": {
      "connection_count": 2,
      "databases": ["maindb", "userdb"],
      "hosts": ["prod-db1.com:3306", "prod-db2.com:3306"]
    },
    "Staging": {
      "connection_count": 1,
      "databases": ["stagingdb"],
      "hosts": ["staging-db.com:3306"]
    }
  }
}
```

### å¤‡ä»½ç»“æœåˆ†ç»„

```json
{
  "groups": {
    "Production": {
      "success_count": 2,
      "error_count": 0,
      "total_size": 2097152,
      "databases": [...]
    },
    "Staging": {
      "success_count": 1,
      "error_count": 0,
      "total_size": 1048576,
      "databases": [...]
    }
  }
}
```

## ğŸ”„ å¤‡ä»½æµç¨‹

### 1. è¿æ¥è§£æ
- è§£æé…ç½®å­—ç¬¦ä¸²
- éªŒè¯è¿æ¥æ ¼å¼
- åˆ†ç»„å’Œè¿‡æ»¤è¿æ¥

### 2. æŒ‰ç»„æ‰§è¡Œå¤‡ä»½
- æŒ‰è¿æ¥ç»„é¡ºåºæ‰§è¡Œ
- è®°å½•æ¯ç»„çš„æ‰§è¡ŒçŠ¶æ€
- ç”Ÿæˆå¸¦ç»„åçš„å¤‡ä»½æ–‡ä»¶

### 3. ä¸Šä¼ å’Œæ¸…ç†
- ä¸Šä¼ åˆ°B2äº‘å­˜å‚¨
- æ¸…ç†æœ¬åœ°ä¸´æ—¶æ–‡ä»¶
- è®°å½•è¯¦ç»†çš„æ‰§è¡Œæ—¥å¿—

## ğŸ› ï¸ å®é™…ä½¿ç”¨ç¤ºä¾‹

### å¾®æœåŠ¡æ¶æ„

```json
[
  {
    "name": "UserService",
    "connection": "mysql://user_svc:pass@user-db:3306/users",
    "schedule": "0 1 * * *"
  },
  {
    "name": "OrderService",
    "connection": "mysql://order_svc:pass@order-db:3306/orders",
    "schedule": "0 2 * * *"
  },
  {
    "name": "PaymentService",
    "connection": "mysql://payment_svc:pass@payment-db:3306/payments",
    "schedule": "0 3 * * *"
  }
]
```

### å¤šç¯å¢ƒéƒ¨ç½²

```bash
# ä½¿ç”¨åˆ†å·åˆ†éš”çš„ç®€å•æ ¼å¼
MYSQL_CONNECTIONS="mysql://prod:pass@prod.db.com:3306/app;mysql://staging:pass@staging.db.com:3306/app;mysql://dev:pass@dev.db.com:3306/app"
```

### æ··åˆäº‘éƒ¨ç½²

```json
[
  {
    "name": "AWS-Primary",
    "connection": "mysql://aws_user:pass@aws-rds.amazonaws.com:3306/maindb",
    "retention_days": 30
  },
  {
    "name": "GCP-Analytics",
    "connection": "mysql://gcp_user:pass@gcp-sql.googleapis.com:3306/analytics?ssl-mode=REQUIRED",
    "retention_days": 90
  }
]
```

## ğŸ” APIç«¯ç‚¹å¢å¼º

### çŠ¶æ€æŸ¥è¯¢

```bash
# æŸ¥çœ‹æ‰€æœ‰è¿æ¥ç»„çŠ¶æ€
curl http://localhost:8080/status

# å“åº”åŒ…å«åˆ†ç»„ä¿¡æ¯
{
  "total_database_count": 5,
  "connection_groups": {
    "Production": {...},
    "Staging": {...}
  }
}
```

### å¤‡ä»½ç»“æœ

```bash
# æ‰‹åŠ¨è§¦å‘å¤‡ä»½
curl -X POST http://localhost:8080/backup/run

# å“åº”åŒ…å«åˆ†ç»„ç»“æœ
{
  "groups": {
    "Production": {...},
    "Staging": {...}
  },
  "databases": [...],
  "success_count": 4,
  "error_count": 1
}
```

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

### å¹¶å‘æ§åˆ¶
- æŒ‰ç»„é¡ºåºæ‰§è¡Œï¼Œé¿å…èµ„æºå†²çª
- æ”¯æŒå¤§å‹æ•°æ®åº“çš„é”™å³°å¤‡ä»½
- æ™ºèƒ½è°ƒåº¦é¿å…ç½‘ç»œæ‹¥å¡

### èµ„æºç®¡ç†
- ä¸´æ—¶æ–‡ä»¶åŠæ—¶æ¸…ç†
- å†…å­˜ä½¿ç”¨ä¼˜åŒ–
- ç½‘ç»œè¿æ¥å¤ç”¨

## ğŸ”’ å®‰å…¨å¢å¼º

### è¿æ¥ä¿¡æ¯ä¿æŠ¤
- æ—¥å¿—ä¸­éšè—æ•æ„Ÿä¿¡æ¯
- å®‰å…¨çš„è¿æ¥ä¿¡æ¯æ˜¾ç¤º
- åˆ†ç»„æ ‡è¯†ä¾¿äºå®¡è®¡

### æƒé™éš”ç¦»
- æ¯ä¸ªæ•°æ®åº“ä½¿ç”¨ç‹¬ç«‹ç”¨æˆ·
- æœ€å°æƒé™åŸåˆ™
- è¿æ¥å¤±è´¥ä¸å½±å“å…¶ä»–ç»„

## ğŸ“ˆ æ‰©å±•æ€§

### æ°´å¹³æ‰©å±•
- æ”¯æŒä»»æ„æ•°é‡çš„æ•°æ®åº“
- æ”¯æŒä»»æ„æ•°é‡çš„è¿æ¥ç»„
- é…ç½®æ–‡ä»¶å¤§å°æ— é™åˆ¶

### åŠŸèƒ½æ‰©å±•
- è‡ªå®šä¹‰å­—æ®µæ”¯æŒ
- æ’ä»¶åŒ–æ¶æ„é¢„ç•™
- APIæ‰©å±•å‹å¥½

## ğŸ§ª æµ‹è¯•éªŒè¯

ç³»ç»ŸåŒ…å«å®Œæ•´çš„æµ‹è¯•å¥—ä»¶ï¼š

```bash
# æµ‹è¯•è§£æå™¨åŠŸèƒ½
python scripts/test_parser_only.py

# æµ‹è¯•ç»“æœ
æ€»æµ‹è¯•æ•°: 13
é€šè¿‡: 13
å¤±è´¥: 0
æˆåŠŸç‡: 100.0%
```

æµ‹è¯•è¦†ç›–ï¼š
- æ‰€æœ‰è¿æ¥æ ¼å¼è§£æ
- åˆ†ç»„åŠŸèƒ½
- è¿‡æ»¤åŠŸèƒ½
- é”™è¯¯å¤„ç†
- è¾¹ç•Œæ¡ä»¶

## ğŸ“š æ–‡æ¡£å’Œç¤ºä¾‹

- `examples/multi-database-config.md` - è¯¦ç»†é…ç½®ç¤ºä¾‹
- `.env.example` - ç¯å¢ƒå˜é‡ç¤ºä¾‹
- `README.md` - å®Œæ•´ä½¿ç”¨è¯´æ˜
- `DEPLOYMENT.md` - éƒ¨ç½²æŒ‡å—

## ğŸ”„ å‘åå…¼å®¹æ€§

- å®Œå…¨å…¼å®¹ç°æœ‰çš„å•æ•°æ®åº“é…ç½®
- ç°æœ‰çš„ç¯å¢ƒå˜é‡æ ¼å¼ç»§ç»­æœ‰æ•ˆ
- æ— éœ€ä¿®æ”¹ç°æœ‰éƒ¨ç½²å³å¯å‡çº§

## ğŸ‰ æ€»ç»“

å¤šæ•°æ®åº“å¤‡ä»½åŠŸèƒ½ä¸ºMySQLå¤‡ä»½ç³»ç»Ÿå¸¦æ¥äº†ï¼š

1. **çµæ´»æ€§**: æ”¯æŒå„ç§å¤æ‚çš„æ•°æ®åº“æ¶æ„
2. **å¯æ‰©å±•æ€§**: è½»æ¾æ·»åŠ æ–°çš„æ•°æ®åº“å’ŒæœåŠ¡å™¨
3. **å¯ç®¡ç†æ€§**: åˆ†ç»„ç®¡ç†å’Œç‹¬ç«‹é…ç½®
4. **å¯è§‚æµ‹æ€§**: è¯¦ç»†çš„çŠ¶æ€å’Œæ—¥å¿—ä¿¡æ¯
5. **å®‰å…¨æ€§**: å¢å¼ºçš„æƒé™æ§åˆ¶å’Œä¿¡æ¯ä¿æŠ¤

è¿™ä½¿å¾—ç³»ç»Ÿèƒ½å¤Ÿæ»¡è¶³ä»ç®€å•çš„å•æ•°æ®åº“å¤‡ä»½åˆ°å¤æ‚çš„ä¼ä¸šçº§å¤šç¯å¢ƒã€å¤šæœåŠ¡å•†çš„å¤‡ä»½éœ€æ±‚ã€‚
